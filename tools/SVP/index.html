<!DOCTYPE html>
<html lang="sk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SVP Klasifikaƒçn√Ω Syst√©m - PeVD</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #EFF6FF 0%, #E0E7FF 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            padding: 24px;
            margin-bottom: 24px;
        }

        .header h1 {
            color: #1F2937;
            font-size: 28px;
            margin-bottom: 8px;
        }

        .header p {
            color: #6B7280;
        }

        .alert {
            background: #DBEAFE;
            border: 1px solid #93C5FD;
            border-radius: 8px;
            padding: 16px;
            margin: 20px 0;
            display: flex;
            gap: 12px;
        }

        .alert-icon {
            color: #2563EB;
            flex-shrink: 0;
        }

        .alert-text {
            color: #1E40AF;
            font-size: 14px;
        }

        .mode-toggle {
            display: flex;
            gap: 8px;
            margin-bottom: 16px;
        }

        .btn {
            padding: 10px 24px;
            border-radius: 8px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
            border: none;
            font-size: 14px;
        }

        .btn-primary {
            background: #4F46E5;
            color: white;
        }

        .btn-primary:hover {
            background: #4338CA;
        }

        .btn-secondary {
            background: #F3F4F6;
            color: #374151;
        }

        .btn-secondary:hover {
            background: #E5E7EB;
        }

        .btn-active {
            background: #4F46E5;
            color: white;
        }

        .section {
            background: white;
            border-radius: 12px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            padding: 24px;
            margin-bottom: 24px;
        }

        .section h2 {
            color: #1F2937;
            font-size: 20px;
            margin-bottom: 16px;
        }

        .checkbox-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .checkbox-item {
            padding: 12px;
            border-radius: 8px;
            cursor: pointer;
            transition: background 0.2s;
        }

        .checkbox-item:hover {
            background: #F9FAFB;
        }

        .checkbox-item label {
            display: flex;
            cursor: pointer;
        }

        .checkbox-item input {
            margin-right: 12px;
            margin-top: 4px;
        }

        .anatomy-segment {
            border: 1px solid #E5E7EB;
            border-radius: 8px;
            padding: 16px;
            background: #F9FAFB;
            margin-bottom: 16px;
        }

        .anatomy-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-bottom: 12px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-group label {
            font-size: 14px;
            font-weight: 500;
            color: #374151;
            margin-bottom: 4px;
        }

        .form-group select {
            padding: 8px;
            border: 1px solid #D1D5DB;
            border-radius: 6px;
            font-size: 14px;
        }

        .form-group select:focus {
            outline: none;
            border-color: #4F46E5;
            box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1);
        }

        .btn-remove {
            padding: 6px 12px;
            background: transparent;
            color: #DC2626;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
        }

        .btn-remove:hover {
            background: #FEE2E2;
        }

        .result-box {
            background: linear-gradient(135deg, #EEF2FF 0%, #E9D5FF 100%);
            border-radius: 12px;
            padding: 24px;
        }

        .result-label {
            font-size: 14px;
            color: #6B7280;
            margin-bottom: 8px;
        }

        .result-code {
            font-size: 32px;
            font-weight: bold;
            color: #312E81;
            font-family: monospace;
        }

        .interpretation-input {
            display: flex;
            gap: 8px;
            margin-bottom: 24px;
        }

        .interpretation-input input {
            flex: 1;
            padding: 12px;
            border: 1px solid #D1D5DB;
            border-radius: 8px;
            font-family: monospace;
            font-size: 16px;
        }

        .interpretation-input input:focus {
            outline: none;
            border-color: #4F46E5;
            box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1);
        }

        .interpretation-result {
            background: linear-gradient(135deg, #ECFDF5 0%, #D1FAE5 100%);
            border: 1px solid #86EFAC;
            border-radius: 12px;
            padding: 24px;
        }

        .interpretation-result h3 {
            color: #065F46;
            font-size: 18px;
            margin-bottom: 16px;
        }

        .interpretation-text {
            color: #374151;
            line-height: 1.8;
            white-space: pre-line;
        }

        .interpretation-text strong {
            color: #111827;
            display: block;
            margin-top: 12px;
            margin-bottom: 4px;
        }

        .hidden {
            display: none;
        }

        .description {
            font-size: 14px;
            color: #6B7280;
            margin-top: 4px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>SVP Klasifikaƒçn√Ω Syst√©m</h1>
            <p>Panvov√© ≈æilov√© poruchy (PeVD) - Symptoms-Varices-Pathophysiology</p>
            
            <div class="alert">
                <div class="alert-icon">‚ÑπÔ∏è</div>
                <div class="alert-text">
                    <strong>D√¥le≈æit√©:</strong> SVP je diskriminaƒçn√Ω n√°stroj pre klasifik√°ciu klinickej prezent√°cie. 
                    Nie je urƒçen√Ω na kvantitat√≠vne meranie z√°va≈ænosti. Pre pacientov so sympt√≥mami doln√Ωch konƒçat√≠n 
                    panvov√©ho p√¥vodu pou≈æ√≠va≈• v spojen√≠ s CEAP klasifik√°ciou.
                </div>
            </div>

            <div class="mode-toggle">
                <button class="btn btn-active" id="classifyBtn">üìã Klasifikova≈• pacienta</button>
                <button class="btn btn-secondary" id="interpretBtn">üîÑ Interpretova≈• SVP k√≥d</button>
            </div>

            <button class="btn btn-secondary" id="toggleDefinitions">Zobrazi≈• defin√≠cie a krit√©ri√°</button>
        </div>

        <div id="classificationMode">
            <div class="section">
                <h2>1. Sympt√≥my (S)</h2>
                <div class="checkbox-group" id="symptomsGroup"></div>
            </div>

            <div class="section">
                <h2>2. K≈ïƒçov√© ≈æily (V)</h2>
                <div class="checkbox-group" id="varicesGroup"></div>
            </div>

            <div class="section">
                <h2>3. Patofyziol√≥gia (P)</h2>
                <div id="anatomySegments"></div>
                <button class="btn btn-primary" id="addSegmentBtn">+ Prida≈• anatomick√Ω segment</button>
            </div>

            <div class="section">
                <h2>‚úì V√Ωsledn√° klasifik√°cia</h2>
                <div class="result-box">
                    <div class="result-label">SVP Klasifik√°cia:</div>
                    <div class="result-code" id="resultCode">SxVxPx</div>
                </div>
                <p style="margin-top: 16px; color: #6B7280; font-size: 14px;">
                    <strong>Pozn√°mka:</strong> "x" oznaƒçuje nehodnoten√© dom√©ny.
                </p>
            </div>
        </div>

        <div id="interpretationMode" class="hidden">
            <div class="section">
                <h2>Interpret√°cia SVP klasifik√°cie</h2>
                <label style="display: block; font-size: 14px; font-weight: 500; color: #374151; margin-bottom: 8px;">
                    Zadajte SVP k√≥d (napr. S2V2PBGV,R,NT)
                </label>
                <div class="interpretation-input">
                    <input type="text" id="svpInput" placeholder="S2V2PBGV,R,NT">
                    <button class="btn btn-primary" id="interpretSvpBtn">Interpretova≈•</button>
                </div>
                <div id="interpretationResult"></div>
            </div>
        </div>
    </div>

    <script>
        var symptomOptions = [
            { value: 'S0', label: 'S0 - ≈Ωiadne sympt√≥my PeVD', description: '≈Ωiadne ren√°lne, panvov√© ani extrapelvick√© sympt√≥my' },
            { value: 'S1', label: 'S1 - Ren√°lne sympt√≥my', description: 'Hemat√∫ria, boles≈• v boku zhor≈°en√° st√°t√≠m/seden√≠m' },
            { value: 'S2', label: 'S2 - Chronick√° panvov√° boles≈•', description: 'Boles≈• >6 mesiacov, zhor≈°en√° st√°t√≠m, zlep≈°en√° le≈æan√≠m' },
            { value: 'S3a', label: 'S3a - Genit√°lne sympt√≥my', description: 'Boles≈•, diskomfort vulvy/skr√≥ta' },
            { value: 'S3b', label: 'S3b - Nonsaf√©nne ≈æily nohy', description: 'Sympt√≥my posteromedi√°lneho stehna' },
            { value: 'S3c', label: 'S3c - ≈Ωilov√° klaudik√°cia', description: 'N√°mahov√° boles≈• doln√Ωch konƒçat√≠n' }
        ];

        var varicesOptions = [
            { value: 'V0', label: 'V0 - ≈Ωiadne varixy', description: '≈Ωiadne bru≈°n√©, panvov√© ani extrapelvick√© varixy' },
            { value: 'V1', label: 'V1 - Ren√°lne hilov√© varixy', description: 'Spojen√© s ob≈°trukciou ƒæavej ren√°lnej ≈æily' },
            { value: 'V2', label: 'V2 - Panvov√© varixy', description: '≈Ωily ‚â•5mm okolo vajeƒçn√≠ka/maternice' },
            { value: 'V3a', label: 'V3a - Genit√°lne varixy', description: 'Vulv√°lne varixy, varikok√©la' },
            { value: 'V3b', label: 'V3b - Doln√© konƒçatiny panvov√©ho p√¥vodu', description: 'Varixy posteromedi√°lneho stehna' }
        ];

        var anatomyOptions = [
            { value: 'IVC', label: 'IVC - Doln√° dut√° ≈æila', laterality: false },
            { value: 'LRV', label: 'LRV - ƒΩav√° ren√°lna ≈æila', laterality: false },
            { value: 'GV', label: 'GV - Gonad√°lne ≈æily', laterality: true },
            { value: 'CIV', label: 'CIV - Spoloƒçn√© ilick√© ≈æily', laterality: true },
            { value: 'EIV', label: 'EIV - Vonkaj≈°ie ilick√© ≈æily', laterality: true },
            { value: 'IIV', label: 'IIV - Vn√∫torn√© ilick√© ≈æily', laterality: true },
            { value: 'PELV', label: 'PELV - Panvov√© √∫nikov√© ≈æily', laterality: false }
        ];

        var hemodynamicOptions = [
            { value: 'O', label: 'O - Ob≈°trukcia', description: '>50% zn√≠≈æenie prierezu' },
            { value: 'R', label: 'R - Reflux', description: 'Retrogr√°dny tok' },
            { value: 'R,O', label: 'R,O - Reflux a Ob≈°trukcia', description: 'Obe s√∫ƒçasne' }
        ];

        var etiologyOptions = [
            { value: 'T', label: 'T - Trombotick√°', description: 'Z predch√°dzaj√∫cej DVT' },
            { value: 'NT', label: 'NT - Netrombotick√°', description: 'Degenerat√≠vny proces/kompresia' },
            { value: 'C', label: 'C - Vroden√°', description: 'Vroden√© malform√°cie' }
        ];

        var selectedSymptoms = [];
        var selectedVarices = [];
        var anatomySegments = [];
        var showDefinitions = false;

        function init() {
            renderSymptoms();
            renderVarices();
            setupEventListeners();
        }

        function renderSymptoms() {
            var container = document.getElementById('symptomsGroup');
            var html = '';
            for (var i = 0; i < symptomOptions.length; i++) {
                var opt = symptomOptions[i];
                html += '<div class="checkbox-item">';
                html += '<label>';
                html += '<input type="checkbox" value="' + opt.value + '" onchange="updateSymptom(\'' + opt.value + '\', this.checked)">';
                html += '<div>';
                html += '<div style="font-weight: 500; color: #1F2937;">' + opt.label + '</div>';
                html += '<div class="description ' + (showDefinitions ? '' : 'hidden') + '">' + opt.description + '</div>';
                html += '</div></label></div>';
            }
            container.innerHTML = html;
        }

        function renderVarices() {
            var container = document.getElementById('varicesGroup');
            var html = '';
            for (var i = 0; i < varicesOptions.length; i++) {
                var opt = varicesOptions[i];
                html += '<div class="checkbox-item">';
                html += '<label>';
                html += '<input type="checkbox" value="' + opt.value + '" onchange="updateVarices(\'' + opt.value + '\', this.checked)">';
                html += '<div>';
                html += '<div style="font-weight: 500; color: #1F2937;">' + opt.label + '</div>';
                html += '<div class="description ' + (showDefinitions ? '' : 'hidden') + '">' + opt.description + '</div>';
                html += '</div></label></div>';
            }
            container.innerHTML = html;
        }

        function updateSymptom(value, checked) {
            if (checked) {
                selectedSymptoms.push(value);
            } else {
                selectedSymptoms = selectedSymptoms.filter(function(s) { return s !== value; });
            }
            updateResult();
        }

        function updateVarices(value, checked) {
            if (checked) {
                selectedVarices.push(value);
            } else {
                selectedVarices = selectedVarices.filter(function(v) { return v !== value; });
            }
            updateResult();
        }

        function addAnatomySegment() {
            anatomySegments.push({
                anatomy: '',
                laterality: '',
                hemodynamic: '',
                etiology: ''
            });
            renderAnatomySegments();
        }

        function renderAnatomySegments() {
            var container = document.getElementById('anatomySegments');
            var html = '';
            
            for (var idx = 0; idx < anatomySegments.length; idx++) {
                var seg = anatomySegments[idx];
                var anatOpt = null;
                for (var i = 0; i < anatomyOptions.length; i++) {
                    if (anatomyOptions[i].value === seg.anatomy) {
                        anatOpt = anatomyOptions[i];
                        break;
                    }
                }
                var needsLaterality = anatOpt && anatOpt.laterality;
                
                html += '<div class="anatomy-segment"><div class="anatomy-grid">';
                html += '<div class="form-group"><label>Anat√≥mia</label>';
                html += '<select onchange="updateSegment(' + idx + ', \'anatomy\', this.value)">';
                html += '<option value="">Vyberte...</option>';
                for (var i = 0; i < anatomyOptions.length; i++) {
                    var opt = anatomyOptions[i];
                    html += '<option value="' + opt.value + '"' + (seg.anatomy === opt.value ? ' selected' : '') + '>' + opt.label + '</option>';
                }
                html += '</select></div>';
                
                if (needsLaterality) {
                    html += '<div class="form-group"><label>Lateralita</label>';
                    html += '<select onchange="updateSegment(' + idx + ', \'laterality\', this.value)">';
                    html += '<option value="">Vyberte...</option>';
                    html += '<option value="left"' + (seg.laterality === 'left' ? ' selected' : '') + '>ƒΩav√° (L)</option>';
                    html += '<option value="right"' + (seg.laterality === 'right' ? ' selected' : '') + '>Prav√° (R)</option>';
                    html += '<option value="bilateral"' + (seg.laterality === 'bilateral' ? ' selected' : '') + '>Bilater√°lna (B)</option>';
                    html += '</select></div>';
                }
                
                html += '<div class="form-group"><label>Hemodynamika</label>';
                html += '<select onchange="updateSegment(' + idx + ', \'hemodynamic\', this.value)">';
                html += '<option value="">Vyberte...</option>';
                for (var i = 0; i < hemodynamicOptions.length; i++) {
                    var opt = hemodynamicOptions[i];
                    html += '<option value="' + opt.value + '"' + (seg.hemodynamic === opt.value ? ' selected' : '') + '>' + opt.label + '</option>';
                }
                html += '</select></div>';
                
                html += '<div class="form-group"><label>Etiol√≥gia</label>';
                html += '<select onchange="updateSegment(' + idx + ', \'etiology\', this.value)">';
                html += '<option value="">Vyberte...</option>';
                for (var i = 0; i < etiologyOptions.length; i++) {
                    var opt = etiologyOptions[i];
                    html += '<option value="' + opt.value + '"' + (seg.etiology === opt.value ? ' selected' : '') + '>' + opt.label + '</option>';
                }
                html += '</select></div>';
                
                html += '</div>';
                html += '<button class="btn-remove" onclick="removeSegment(' + idx + ')">Odstr√°ni≈• segment</button>';
                html += '</div>';
            }
            
            container.innerHTML = html;
        }

        function updateSegment(idx, field, value) {
            anatomySegments[idx][field] = value;
            renderAnatomySegments();
            updateResult();
        }

        function removeSegment(idx) {
            anatomySegments.splice(idx, 1);
            renderAnatomySegments();
            updateResult();
        }

        function updateResult() {
            var S = selectedSymptoms.length > 0 ? selectedSymptoms.join(',') : 'Sx';
            var V = selectedVarices.length > 0 ? selectedVarices.join(',') : 'Vx';
            
            var P = '';
            if (anatomySegments.length > 0) {
                var pSegments = [];
                for (var i = 0; i < anatomySegments.length; i++) {
                    var seg = anatomySegments[i];
                    if (!seg.anatomy) continue;
                    var anatStr = seg.anatomy;
                    if (seg.laterality && seg.laterality !== 'bilateral') {
                        var prefix = seg.laterality === 'left' ? 'L' : 'R';
                        anatStr = prefix + seg.anatomy;
                    } else if (seg.laterality === 'bilateral') {
                        anatStr = 'B' + seg.anatomy;
                    }
                    var hemStr = seg.hemodynamic || 'x';
                    var etiStr = seg.etiology || 'x';
                    pSegments.push(anatStr + ',' + hemStr + ',' + etiStr);
                }
                P = 'P' + pSegments.join('; ');
            } else {
                P = 'Px';
            }

            document.getElementById('resultCode').textContent = S + V + P;
        }

        function interpretSVP() {
            var svpCode = document.getElementById('svpInput').value.trim();
            if (!svpCode) return;

            var description = [];
            
            var sMatch = svpCode.match(/S([0-3][abc]?,?)+/);
            if (sMatch) {
                var sCodes = sMatch[0].substring(1).split(',');
                description.push('<strong>Klinick√Ω obraz:</strong>\n');
                
                for (var i = 0; i < sCodes.length; i++) {
                    var code = sCodes[i];
                    if (code === '1') {
                        description.push('Pacient/ka trp√≠ ren√°lnymi sympt√≥mami ≈æilov√©ho p√¥vodu.\n');
                    } else if (code === '2') {
                        description.push('Pr√≠tomn√° je chronick√° panvov√° boles≈• ≈æilov√©ho p√¥vodu.\n');
                    } else if (code === '3a') {
                        description.push('Pacient/ka m√° lokalizovan√© genit√°lne sympt√≥my.\n');
                    } else if (code === '3b') {
                        description.push('Pr√≠tomn√© s√∫ sympt√≥my posteromedi√°lneho stehna.\n');
                    } else if (code === '3c') {
                        description.push('Pacient/ka trp√≠ ≈æilovou klaudik√°ciou.\n');
                    }
                }
            }

            var vMatch = svpCode.match(/V([0-3][abc]?,?)+/);
            if (vMatch) {
                var vCodes = vMatch[0].substring(1).split(',');
                description.push('\n<strong>Zobrazovacie n√°lezy:</strong>\n');
                
                for (var i = 0; i < vCodes.length; i++) {
                    var code = vCodes[i];
                    if (code === '1') {
                        description.push('Ren√°lne hilov√© varixy.\n');
                    } else if (code === '2') {
                        description.push('Panvov√© varixy.\n');
                    } else if (code === '3a') {
                        description.push('Genit√°lne varixy.\n');
                    } else if (code === '3b') {
                        description.push('Varixy doln√Ωch konƒçat√≠n.\n');
                    }
                }
            }

            var resultHtml = '<div class="interpretation-result">';
            resultHtml += '<h3>‚úì Popis pacientov√Ωch ≈•a≈ækost√≠</h3>';
            resultHtml += '<div class="interpretation-text">' + description.join('') + '</div>';
            resultHtml += '</div>';
            
            document.getElementById('interpretationResult').innerHTML = resultHtml;
        }

        function setupEventListeners() {
            document.getElementById('classifyBtn').addEventListener('click', function() {
                document.getElementById('classificationMode').classList.remove('hidden');
                document.getElementById('interpretationMode').classList.add('hidden');
                this.classList.add('btn-active');
                this.classList.remove('btn-secondary');
                document.getElementById('interpretBtn').classList.remove('btn-active');
                document.getElementById('interpretBtn').classList.add('btn-secondary');
            });

            document.getElementById('interpretBtn').addEventListener('click', function() {
                document.getElementById('classificationMode').classList.add('hidden');
                document.getElementById('interpretationMode').classList.remove('hidden');
                this.classList.add('btn-active');
                this.classList.remove('btn-secondary');
                document.getElementById('classifyBtn').classList.remove('btn-active');
                document.getElementById('classifyBtn').classList.add('btn-secondary');
            });

            document.getElementById('addSegmentBtn').addEventListener('click', addAnatomySegment);
            document.getElementById('interpretSvpBtn').addEventListener('click', interpretSVP);
            
            document.getElementById('svpInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') interpretSVP();
            });

            document.getElementById('toggleDefinitions').addEventListener('click', function() {
                showDefinitions = !showDefinitions;
                this.textContent = showDefinitions ? 'Skry≈• defin√≠cie a krit√©ri√°' : 'Zobrazi≈• defin√≠cie a krit√©ri√°';
                renderSymptoms();
                renderVarices();
            });
        }

        init();
    </script>
</body>
</html>
